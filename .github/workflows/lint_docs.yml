name: "Lint documents"
on:
  workflow_dispatch: {}
  pull_request:
    paths:
      - "docs/**/*"

env:
  VALE_VERSION: "3.13.0"
jobs:
  lint_docs:
    permissions:
      contents: read
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
        with:
          show-progress: false

      - name: "Setup Vale"
        run: |
          wget -q -O "vale.tar.gz" "https://github.com/errata-ai/vale/releases/download/v${{env.VALE_VERSION}}/vale_${{env.VALE_VERSION}}_Linux_64-bit.tar.gz"
          
          tar xzf "vale.tar.gz"
          chmod +x ./vale
          
          # add current directory to $PATH so that the binary gets found
          echo "${PWD}" >> "${GITHUB_PATH}"
          

      - name: "Run Vale"
        run: |
          make lint_docs